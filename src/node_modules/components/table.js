import React, { useState, useEffect } from 'react';

import TableRows from 'components/tableRows'
import TableHeader from 'components/tableHeader'

const items = [
    {
        id: 1,
        title: 'One',
        checked: true,
    },
    {
        id: 2,
        title: 'Two',
        checked: false,
    },
    {
        id: 3,
        title: 'Three',
        checked: false,
    }
];

const Table = () => {
    const [isCheckedCheckbox, setIsCheckedCheckbox] = useState(false);
    const [list, setList] = useState(items);

    const toggleMainCheckbox = (status) => {
        setIsCheckedCheckbox(status);

        setList(list.map(el => {
            const updatedEl = { ...el };
            updatedEl.checked = status;
            return updatedEl;
        }));
    }

    const resetIsCheckedCheckbox = () => {
        setIsCheckedCheckbox(false);
    }

    useEffect(() => {
        setList(list);
    }, [list])

    return (
        <div>
            <TableHeader
                isCheckedCheckbox={isCheckedCheckbox}
                onChangeHandler={toggleMainCheckbox}
            />
            <TableRows 
                items={list}
                onChangeHandler={resetIsCheckedCheckbox}
            />
        </div>
    );
}

export default Table;